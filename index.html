<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Financial Plan - Mr. Lucky Dube</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #1a2a6c, #2a4a8c);
            color: white;
            padding: 30px;
            text-align: center;
            border-bottom: 5px solid #ffd700;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .controls-panel {
            background: #f8f9fa;
            padding: 25px;
            border-bottom: 2px solid #e9ecef;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .control-group {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .control-group h3 {
            color: #2a4a8c;
            margin-bottom: 15px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group h3 i {
            color: #ffd700;
        }

        .input-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
        }

        .input-row label {
            font-weight: 600;
            color: #555;
        }

        input[type="number"] {
            width: 120px;
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1rem;
            text-align: right;
            transition: all 0.3s;
        }

        input[type="number"]:focus {
            border-color: #2a4a8c;
            box-shadow: 0 0 0 3px rgba(42, 74, 140, 0.1);
            outline: none;
        }

        .calculate-btn {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #2a4a8c, #1a2a6c);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(42, 74, 140, 0.3);
        }

        .content {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid #e9ecef;
        }

        .section.full-width {
            grid-column: 1 / -1;
        }

        h2 {
            color: #1a2a6c;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ffd700;
            font-size: 1.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9rem;
        }

        th {
            background: #2a4a8c;
            color: white;
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        td {
            padding: 10px 8px;
            border-bottom: 1px solid #e0e0e0;
            text-align: right;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        tr:hover {
            background: #e3f2fd;
        }

        .positive {
            color: #2e7d32;
            font-weight: 600;
        }

        .negative {
            color: #c62828;
            font-weight: 600;
        }

        .neutral {
            color: #666;
        }

        .summary-box {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 5px solid #2a4a8c;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #90caf9;
        }

        .summary-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .milestone-timeline {
            margin: 20px 0;
            position: relative;
        }

        .milestone {
            background: white;
            border: 2px solid #2a4a8c;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
            padding-left: 50px;
        }

        .milestone:before {
            content: '';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background: #ffd700;
            border-radius: 50%;
            border: 3px solid #2a4a8c;
        }

        .milestone-date {
            font-weight: 700;
            color: #1a2a6c;
            margin-bottom: 5px;
        }

        .milestone-desc {
            color: #555;
        }

        .progress-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .phase {
            background: #f5f5f5;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #ff9800;
        }

        .phase h4 {
            color: #1a2a6c;
            margin-bottom: 10px;
        }

        footer {
            background: #1a2a6c;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            border-top: 5px solid #ffd700;
        }

        @media (max-width: 1024px) {
            .content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .controls-panel {
                grid-template-columns: 1fr;
            }
            
            .section {
                padding: 15px;
            }
            
            table {
                font-size: 0.8rem;
            }
            
            td, th {
                padding: 6px 4px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Interactive Financial Plan</h1>
            <div class="subtitle">Mr. Lucky Dube - Overdraft Management & Property Savings Strategy</div>
            <div style="margin-top: 15px; font-size: 0.9rem; opacity: 0.8;">
                <i class="fas fa-info-circle"></i> Adjust any value below and click "Calculate Plan" to update all calculations
            </div>
        </header>

        <div class="controls-panel">
            <div class="control-group">
                <h3><i class="fas fa-money-bill-wave"></i> Income Settings</h3>
                <div class="input-row">
                    <label>December 2025 Salary:</label>
                    <input type="number" id="decSalary" value="49611.90" step="0.01" min="0">
                </div>
                <div class="input-row">
                    <label>Jan-Apr 2026 Salary:</label>
                    <input type="number" id="janAprSalary" value="40560.50" step="0.01" min="0">
                </div>
                <div class="input-row">
                    <label>Post-PhD Salary (May 2026+):</label>
                    <input type="number" id="postPhdSalary" value="44616.55" step="0.01" min="0">
                </div>
            </div>

            <div class="control-group">
                <h3><i class="fas fa-credit-card"></i> Overdraft Settings</h3>
                <div class="input-row">
                    <label>Overdraft Limit:</label>
                    <input type="number" id="odLimit" value="30000" step="0.01" min="0">
                </div>
                <div class="input-row">
                    <label>Interest Rate (% p.a.):</label>
                    <input type="number" id="interestRate" value="16.25" step="0.01" min="0">
                </div>
                <div class="input-row">
                    <label>Initiation Fee:</label>
                    <input type="number" id="initFee" value="600" step="0.01" min="0">
                </div>
            </div>

            <div class="control-group">
                <h3><i class="fas fa-calendar-alt"></i> Expense Adjustments</h3>
                <div class="input-row">
                    <label>Lobola Amount:</label>
                    <input type="number" id="lobola" value="18000" step="0.01" min="0">
                </div>
                <div class="input-row">
                    <label>Thokoza Amount:</label>
                    <input type="number" id="thokoza" value="5000" step="0.01" min="0">
                </div>
                <div class="input-row">
                    <label>Wife Monthly Budget:</label>
                    <input type="number" id="wifeBudget" value="10000" step="0.01" min="0">
                </div>
            </div>

            <button class="calculate-btn" onclick="calculatePlan()">
                <i class="fas fa-calculator"></i> Calculate & Update Full Plan
            </button>
        </div>

        <div class="content">
            <div class="section">
                <h2><i class="fas fa-calculator"></i> December 2025 Financial Picture</h2>
                <div class="summary-box">
                    <div class="summary-item">
                        <span>December Salary:</span>
                        <span id="summaryDecSalary" class="positive">E49,611.90</span>
                    </div>
                    <div class="summary-item">
                        <span>Once-off Expenses:</span>
                        <span id="summaryOnceOff" class="negative">E34,900.00</span>
                    </div>
                    <div class="summary-item">
                        <span>Regular Monthly Expenses:</span>
                        <span id="summaryRegular" class="negative">E25,150.00</span>
                    </div>
                    <div class="summary-item">
                        <span>Fixed Duration Expenses:</span>
                        <span id="summaryFixed" class="negative">E13,733.24</span>
                    </div>
                    <div class="summary-item">
                        <span>Total December Expenses:</span>
                        <span id="summaryTotalExpenses" class="negative">E73,783.24</span>
                    </div>
                    <div class="summary-item">
                        <span><strong>Shortfall (Overdraft Needed):</strong></span>
                        <span id="summaryShortfall" class="negative"><strong>E24,171.34</strong></span>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2><i class="fas fa-chart-line"></i> Overdraft Repayment Progress</h2>
                <div class="progress-bar">
                    <div class="progress-fill" id="odProgress" style="width: 0%"></div>
                </div>
                <div style="text-align: center; margin-bottom: 20px;">
                    <span id="odStatus">0% repaid (E0.00 / E24,171.34)</span>
                </div>
                
                <div class="summary-box">
                    <div class="summary-item">
                        <span>Total Overdraft Used:</span>
                        <span id="totalODUsed" class="negative">E24,171.34</span>
                    </div>
                    <div class="summary-item">
                        <span>Total Interest to Pay:</span>
                        <span id="totalInterest" class="negative">E1,710.22</span>
                    </div>
                    <div class="summary-item">
                        <span>Repayment Completion:</span>
                        <span id="repaymentDate" class="positive">July 2026</span>
                    </div>
                    <div class="summary-item">
                        <span><strong>Final Surplus After Repayment:</strong></span>
                        <span id="finalSurplus" class="positive"><strong>E6,233.31/month</strong></span>
                    </div>
                </div>
            </div>

            <div class="section full-width">
                <h2><i class="fas fa-table"></i> Overdraft Repayment Schedule</h2>
                <div style="overflow-x: auto;">
                    <table id="repaymentTable">
                        <thead>
                            <tr>
                                <th>Month</th>
                                <th>Salary (E)</th>
                                <th>Expenses (E)</th>
                                <th>Surplus (E)</th>
                                <th>OD Start (E)</th>
                                <th>Interest (E)</th>
                                <th>Repayment (E)</th>
                                <th>OD End (E)</th>
                                <th>Cum. Int (E)</th>
                            </tr>
                        </thead>
                        <tbody id="repaymentBody">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section">
                <h2><i class="fas fa-road"></i> Key Financial Milestones</h2>
                <div class="milestone-timeline">
                    <div class="milestone">
                        <div class="milestone-date" id="milestone1">December 2025</div>
                        <div class="milestone-desc">Overdraft draw of E24,171.34 to cover December shortfall</div>
                    </div>
                    <div class="milestone">
                        <div class="milestone-date" id="milestone2">March 2026</div>
                        <div class="milestone-desc">Ntsiki payments end (+E500/month available)</div>
                    </div>
                    <div class="milestone">
                        <div class="milestone-date" id="milestone3">May 2026</div>
                        <div class="milestone-desc">Post-PhD salary increase to E44,616.55</div>
                    </div>
                    <div class="milestone">
                        <div class="milestone-date" id="milestone4">July 2026</div>
                        <div class="milestone-desc">Overdraft fully repaid</div>
                    </div>
                    <div class="milestone">
                        <div class="milestone-date" id="milestone5">October 2026</div>
                        <div class="milestone-desc">Babe payments end (+E1,300/month available)</div>
                    </div>
                    <div class="milestone">
                        <div class="milestone-date" id="milestone6">November 2027</div>
                        <div class="milestone-desc">Loan A ends (+E5,840.99/month available)</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2><i class="fas fa-piggy-bank"></i> Property Savings Timeline</h2>
                <div class="phase">
                    <h4>Phase 1: Emergency Fund (Aug-Dec 2026)</h4>
                    <p><strong>Monthly Allocation:</strong> E5,000 to emergency fund</p>
                    <p><strong>Target:</strong> E25,000 (3 months of basic expenses)</p>
                </div>
                <div class="phase">
                    <h4>Phase 2: Property Fund Building (Jan-Oct 2027)</h4>
                    <p><strong>Monthly Allocation:</strong> E6,000 to property fund</p>
                    <p><strong>Target:</strong> E60,000 by October 2027</p>
                </div>
                <div class="phase">
                    <h4>Phase 3: Accelerated Savings (Nov 2027-Jul 2028)</h4>
                    <p><strong>Monthly Surplus:</strong> E13,374.30</p>
                    <p><strong>Property Fund:</strong> E10,000/month</p>
                </div>
                
                <div class="summary-box">
                    <div class="summary-item">
                        <span>October 2027 (Land Purchase Possible):</span>
                        <span id="prop2027" class="positive">E60,000</span>
                    </div>
                    <div class="summary-item">
                        <span>July 2028 (Construction Start Possible):</span>
                        <span id="prop2028" class="positive">E150,000</span>
                    </div>
                    <div class="summary-item">
                        <span>December 2029 (House Down Payment):</span>
                        <span id="prop2029" class="positive">E294,000</span>
                    </div>
                </div>
            </div>

            <div class="section full-width">
                <h2><i class="fas fa-home"></i> Property Purchase Options</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 20px; border-radius: 10px;">
                        <h4 style="color: #2e7d32;">Land Purchase (Urban Plot)</h4>
                        <p><strong>Estimated Cost:</strong> E500,000 - E800,000</p>
                        <p><strong>20% Down Payment:</strong> E100,000 - E160,000</p>
                        <p><strong>Achievable By:</strong> <span id="landDate" style="font-weight: 700;">October 2027</span></p>
                    </div>
                    <div style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 20px; border-radius: 10px;">
                        <h4 style="color: #1565c0;">Medium House (3-bedroom)</h4>
                        <p><strong>Estimated Cost:</strong> E1,200,000 - E2,000,000</p>
                        <p><strong>20% Down Payment:</strong> E240,000 - E400,000</p>
                        <p><strong>Achievable By:</strong> <span id="houseDate" style="font-weight: 700;">December 2029</span></p>
                    </div>
                    <div style="background: linear-gradient(135deg, #f3e5f5, #e1bee7); padding: 20px; border-radius: 10px;">
                        <h4 style="color: #6a1b9a;">Luxury Property</h4>
                        <p><strong>Estimated Cost:</strong> E3,000,000+</p>
                        <p><strong>20% Down Payment:</strong> E600,000+</p>
                        <p><strong>Achievable By:</strong> <span id="luxuryDate" style="font-weight: 700;">December 2031</span></p>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Interactive Financial Plan for Mr. Lucky Dube | Last Updated: December 2025</p>
            <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
                <i class="fas fa-lightbulb"></i> This plan assumes consistent income and expense patterns. 
                Adjust values regularly based on actual circumstances.
            </p>
        </footer>
    </div>

    <script>
        // Initialize the plan when page loads
        document.addEventListener('DOMContentLoaded', calculatePlan);

        function calculatePlan() {
            // Get all input values
            const decSalary = parseFloat(document.getElementById('decSalary').value);
            const janAprSalary = parseFloat(document.getElementById('janAprSalary').value);
            const postPhdSalary = parseFloat(document.getElementById('postPhdSalary').value);
            const odLimit = parseFloat(document.getElementById('odLimit').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value) / 100; // Convert to decimal
            const initFee = parseFloat(document.getElementById('initFee').value);
            const lobola = parseFloat(document.getElementById('lobola').value);
            const thokoza = parseFloat(document.getElementById('thokoza').value);
            const wifeBudget = parseFloat(document.getElementById('wifeBudget').value);

            // Fixed values (these could also be made adjustable if needed)
            const onceOffPeople = 11450; // Masuku, Mbuso, Make, Ntobeko, Sandile
            const fixedLoans = 5840.99 + 5167.16 + 925.09 + 500 + 1300; // Loan A, B, C, Ntsiki, Babe
            const regularExpenses = 4100 + 500 + 750 + 500 + 500 + 1000 + 3000 + 1800 + 1000 + 2000;
            
            // Calculate December expenses
            const onceOffTotal = onceOffPeople + lobola + thokoza;
            const decExpenses = onceOffTotal + regularExpenses + fixedLoans + wifeBudget;
            
            // Calculate shortfall
            const shortfall = decExpenses - decSalary;
            
            // Update December summary
            document.getElementById('summaryDecSalary').textContent = `E${decSalary.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('summaryOnceOff').textContent = `E${onceOffTotal.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('summaryRegular').textContent = `E${(regularExpenses + wifeBudget).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('summaryFixed').textContent = `E${fixedLoans.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('summaryTotalExpenses').textContent = `E${decExpenses.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('summaryShortfall').textContent = `E${shortfall.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;

            // Calculate overdraft repayment schedule
            const repaymentSchedule = calculateRepaymentSchedule(
                decSalary, janAprSalary, postPhdSalary, 
                decExpenses, regularExpenses, fixedLoans, wifeBudget,
                shortfall, interestRate, odLimit
            );
            
            // Update repayment table
            updateRepaymentTable(repaymentSchedule);
            
            // Update progress bar
            const totalOD = repaymentSchedule[0].overdraftEnd;
            const finalOD = repaymentSchedule[repaymentSchedule.length - 1].overdraftEnd;
            const repaid = totalOD - finalOD;
            const progressPercent = Math.min(100, Math.max(0, (repaid / totalOD) * 100));
            
            document.getElementById('odProgress').style.width = `${progressPercent}%`;
            document.getElementById('odStatus').textContent = 
                `${Math.round(progressPercent)}% repaid (E${Math.abs(repaid).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})} / E${Math.abs(totalOD).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})})`;
            
            // Update summary stats
            const totalInterest = repaymentSchedule[repaymentSchedule.length - 1].cumulativeInterest;
            const repaymentMonth = repaymentSchedule.findIndex(item => item.overdraftEnd >= 0) + 1;
            const repaymentDate = getMonthName(repaymentMonth - 1); // -1 because December is month 0
            
            document.getElementById('totalODUsed').textContent = `E${Math.abs(totalOD).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('totalInterest').textContent = `E${totalInterest.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('repaymentDate').textContent = repaymentDate;
            document.getElementById('finalSurplus').textContent = `E${repaymentSchedule[repaymentMonth]?.surplus.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}) || '0.00'}/month`;
            
            // Update property savings
            updatePropertyProjections(repaymentSchedule, repaymentMonth);
        }

        function calculateRepaymentSchedule(decSalary, janAprSalary, postPhdSalary, decExpenses, regularExpenses, fixedLoans, wifeBudget, shortfall, interestRate, odLimit) {
            const schedule = [];
            const dailyRate = interestRate / 365;
            
            // Days in each month (simplified)
            const daysInMonth = [30, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            const months = ['Dec 2025', 'Jan 2026', 'Feb 2026', 'Mar 2026', 'Apr 2026', 'May 2026', 'Jun 2026', 'Jul 2026', 'Aug 2026', 'Sep 2026', 'Oct 2026', 'Nov 2026', 'Dec 2026'];
            
            let overdraftBalance = -Math.min(Math.abs(shortfall), odLimit);
            let cumulativeInterest = 0;
            
            for (let i = 0; i < 8; i++) { // Calculate first 8 months (Dec 2025 - Jul 2026)
                const monthName = months[i];
                let salary, expenses;
                
                // Determine salary for this month
                if (i === 0) {
                    salary = decSalary;
                    expenses = decExpenses;
                } else if (i >= 1 && i <= 4) {
                    salary = janAprSalary;
                    expenses = regularExpenses + fixedLoans + wifeBudget;
                } else {
                    salary = postPhdSalary;
                    expenses = regularExpenses + fixedLoans + wifeBudget;
                }
                
                // Adjust expenses for April (Ntsiki ends) and beyond
                if (i >= 4) { // April 2026
                    expenses -= 500; // Ntsiki ends
                }
                
                // Calculate surplus
                const surplus = salary - expenses;
                
                // Calculate interest
                const interest = overdraftBalance < 0 ? Math.abs(overdraftBalance) * dailyRate * daysInMonth[i % 12] : 0;
                
                // Calculate repayment
                let repayment = 0;
                if (surplus > 0 && overdraftBalance < 0) {
                    repayment = Math.min(surplus, Math.abs(overdraftBalance + interest));
                }
                
                // Update cumulative interest
                cumulativeInterest += interest;
                
                // Calculate ending balance
                const overdraftEnd = overdraftBalance + interest - repayment;
                
                schedule.push({
                    month: monthName,
                    salary: salary,
                    expenses: expenses,
                    surplus: surplus,
                    overdraftStart: overdraftBalance,
                    interest: interest,
                    repayment: repayment,
                    overdraftEnd: overdraftEnd,
                    cumulativeInterest: cumulativeInterest,
                    days: daysInMonth[i % 12]
                });
                
                // Update for next month
                overdraftBalance = overdraftEnd;
            }
            
            return schedule;
        }

        function updateRepaymentTable(schedule) {
            const tbody = document.getElementById('repaymentBody');
            tbody.innerHTML = '';
            
            schedule.forEach((month, index) => {
                const row = document.createElement('tr');
                
                // Determine CSS class for surplus
                const surplusClass = month.surplus >= 0 ? 'positive' : 'negative';
                const odStartClass = month.overdraftStart >= 0 ? 'positive' : 'negative';
                const odEndClass = month.overdraftEnd >= 0 ? 'positive' : 'negative';
                
                row.innerHTML = `
                    <td>${month.month}</td>
                    <td>${month.salary.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>${month.expenses.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td class="${surplusClass}">${month.surplus.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td class="${odStartClass}">${month.overdraftStart.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td class="negative">${month.interest.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td class="positive">${month.repayment.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td class="${odEndClass}">${month.overdraftEnd.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td class="negative">${month.cumulativeInterest.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function updatePropertyProjections(schedule, repaymentMonth) {
            // Simple projection calculation
            const monthlySurplusAfterOD = schedule[repaymentMonth]?.surplus || 0;
            
            // Phase 1: Aug-Dec 2026 (5 months)
            const phase1Months = 5;
            const phase1Property = 1000 * phase1Months; // E1,000/month
            
            // Phase 2: Jan-Oct 2027 (10 months)
            const phase2Months = 10;
            const phase2Property = 5000 * phase2Months; // E5,000/month
            
            // Phase 3: Nov 2027-Jul 2028 (9 months)
            const phase3Months = 9;
            const phase3Property = 10000 * phase3Months; // E10,000/month
            
            const prop2027 = phase1Property + phase2Property;
            const prop2028 = prop2027 + phase3Property;
            const prop2029 = prop2028 + (12000 * 12); // E12,000/month for 12 months
            
            // Update property projections
            document.getElementById('prop2027').textContent = `E${prop2027.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            document.getElementById('prop2028').textContent = `E${prop2028.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            document.getElementById('prop2029').textContent = `E${prop2029.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            
            // Update property dates based on projections
            const landDate = prop2027 >= 100000 ? "October 2027" : "December 2027";
            const houseDate = prop2029 >= 240000 ? "December 2029" : "Mid-2030";
            const luxuryDate = prop2029 >= 600000 ? "December 2029" : "2031+";
            
            document.getElementById('landDate').textContent = landDate;
            document.getElementById('houseDate').textContent = houseDate;
            document.getElementById('luxuryDate').textContent = luxuryDate;
        }

        function getMonthName(monthIndex) {
            const months = ['December 2025', 'January 2026', 'February 2026', 'March 2026', 
                           'April 2026', 'May 2026', 'June 2026', 'July 2026', 
                           'August 2026', 'September 2026', 'October 2026', 'November 2026', 'December 2026'];
            return months[monthIndex] || 'Unknown';
        }
    </script>
</body>
</html>